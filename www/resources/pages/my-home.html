<template>
	<div class="page home-page cam" data-name="my-home">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="left">
                            <a class="panel-open" href="#">
                                <i class="f7-icons icon-menu"></i>
                            </a>
                        </div>
                        <div class="title">Home</div>
                    </div>
                </div>

                <!--<div class="toolbar toolbar-bottom">
                    <div class="toolbar-inner">
                        <a class="btn-cs" href="#" id='openCamList'>
                            list
                        </a>
                    </div>
                </div>-->
                <div class="toolbar toolbar-bottom">
                    <div class="toolbar-inner">
                        <a class="btn-cs" href="#" id='connectCam'>
                            live
                        </a>
                    </div>
                </div>
				

                <div class="page-content">
                    <div class="inner-content">
                        <!--<p><a href="/open.dashcam/">open</a></p>
                        <p><a href="/air.dashcam/">open</a></p>
<video id="myvideo" controls="controls" width="400">
    <source src="file:///android_asset/www/gruppenruf.mp4" />
 </video>-->
                        <img class="main-bg" src="./resources/images/main.png" alt="main">
						<!--<p class="text-content">Click the CONNECT button to start watching live stream.</p>-->
                        <!--<p class="text-content">You have not had any connections to the dashcam.</p>-->
                        <p class="text-content">Select in the connection settings Wi-Fi your dashcam and click the CONNECT button.</p>
						<br><a href="/my-hints/">How to connect?</a>
                    </div>
                </div>
            </div>
</template>

<script>
  // script must return component object
    return { 
        data: function () {
            var self = this;
            var ret = {};            

            return ret;
        },
		methods: {
		},
        on: {
            pageInit: function (e, page) {  
				var self = this;    
				var page = page.$el.find('.page-content'); 
				
				var myPage = $$('.cam');
				
				myPage.on('click', '#connectCam', function(e){
					//self.$app.preloader.show();
				
					// Play Video from Application Directory or Stream Online
					//HKVideoPlayer.play(API_LIVE_STREAM);
					
					 var videoUrl = API_LIVE_STREAM;

					  // Just play a video
					  window.plugins.streamingMedia.playVideo(videoUrl);

					  // Play a video with callbacks
					  var options = {
						successCallback: function() {
						  App.dialog.log("Video was closed without error.");
						},
						errorCallback: function(errMsg) {
						  App.dialog.log("Error! " + errMsg);
						},
						orientation: 'landscape',
						shouldAutoClose: true,  // true(default)/false
						controls: true // true(default)/false. Used to hide controls on fullscreen
					  };
					  window.plugins.streamingMedia.playVideo(videoUrl, options);
					  
					  
					/*ios
					WifiWizard2.getConnectedSSID().then(response => {	
						let mySSID = JSON.stringify(response);
						var pattern = /AUTO-VOX/i;
						var pattern1 = /M-/i;
						
						self.$app.preloader.hide();		
						if ((pattern.test(mySSID) || pattern1.test(mySSID))) {	
							VideoPlayer.play(API_LIVE_STREAM);									
						}else{					
							self.$app.dialog.alert('No Dashcam connected');									
						}					
					});*/
				});
			}
		}
    };
</script>
    