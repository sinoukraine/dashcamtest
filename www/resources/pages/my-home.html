<template>
	<div class="page home-page cam" data-name="my-home">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="left">
                            <a class="panel-open" href="#">
                                <i class="f7-icons icon-menu"></i>
                            </a>
                        </div>
                        <div class="title">Home</div>
                    </div>
                </div>

                <!--<div class="toolbar toolbar-bottom">
                    <div class="toolbar-inner">
                        <a class="btn-cs" href="#" id='openCamList'>
                            list
                        </a>
                    </div>
                </div>-->
                <div class="toolbar toolbar-bottom">
                    <div class="toolbar-inner">
                        <a class="btn-cs" href="#" id='connectCam'>
                            live
                        </a>
                    </div>
                </div>
				

                <div class="page-content">
                    <div class="inner-content">
					
					
                        <!--<p><a href="/open.dashcam/">open</a></p>
                        <p><a href="/air.dashcam/">open</a></p>
<video id="myvideo" controls="controls" width="400">
    <source src="file:///android_asset/www/gruppenruf.mp4" />
 </video>-->
                        <!--<img class="main-bg" src="./resources/images/main.png" alt="main">
					   <p class="text-content">Select in the connection settings Wi-Fi your dashcam and click the CONNECT button.</p>
						<br><a href="/my-hints/">How to connect?</a>-->
						<!--
						<video-js id="my_video_1" class="vjs-default-skin" controls preload="auto" width="640" height="268">
							<source src="http://192.168.1.1/livesubstream.h264" type="application/x-mpegURL">
						</video-js>
						-->
						
						<!--
						<video
                            id="my-player"
							
                            class="video-js"
                            controls
                            preload="auto"
                            poster="//vjs.zencdn.net/v/oceans.png"
                            data-setup='{}'>
                          <source src="http://192.168.1.1/livesubstream.h264" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'></source>
                          <p class="vjs-no-js">
                            To view this video please enable JavaScript
                          </p>
                        </video>-->
                    </div>
                </div>
            </div>
</template>

<script>
  // script must return component object
    return { 
        data: function () {
            var self = this;
            var ret = {};            

            return ret;
        },
		methods: {
		},
        on: {
            pageInit: function (e, page) {  
				var self = this;    
				
    //var player = videojs('my_video_1');
				page.$el.on('click', '#connectCam', function(e){
					/*var player = videojs('example-video');
					player.src({ src: 'http://192.168.1.1/livesubstream.h264', type: 'application/dash+xml'});
					player.play();
					
					
					var player = videojs('example-video');
					  player.src({ src: 'https://s2.ipcamlive.com/streams/025d05f4453102a9f/stream.m3u8', type: 'application/dash+xml'});
					  player.play();*/
					
					
					
					/*window.PYB.vlcStreamPlayer.openPlayerForStreamURL(function(){}, function(){}, "https://s2.ipcamlive.com/streams/025d05f4453102a9f/stream.m3u8");
					*/
					/*window.VideoPlayerVLC.play(
						 "http://192.168.1.1/livesubstream.h264",
						 done => {},
						 error => {}
					);*/
					//App.dialog.alert("start");
						
					  /*let options = {
						  successCallback: () => { App.dialog.alert("Video was closed without error.") },
						  errorCallback: (e) => { App.dialog.alert("Error! " + e) },
						  orientation: 'landscape',
						  shouldAutoClose: true,
						  controls: false
						};
						

						window.plugins.streamingMedia.playVideo('http://192.168.1.1/DCIM/101video/20190620153223_10_720p.MP4', options);
						*/
	/*					
						cordova.plugins.rtsplayer.watchVideo({ path: 'http://192.168.1.1/livesubstream.h264', x: 0, y: 60, width: 500, height: 500 }, function () { }, function () { });
*/ 
						/*if(window && window.plugins && window.plugins.streamingMedia) {
						  let StreamingMedia = window.plugins.streamingMedia;
						  StreamingMedia.playiOS('http://192.168.1.1/livesubstream.h264');
						}*/
						
						/*
						var rtsp = null;
						try {
							rtsp = require('rtsp-live555');
						} catch (e) {
							rtsp = require('./lib/rtsp-live555.js');
						}
						var _url = 'http://192.168.1.1/livesubstream.h264';//test address
						var stream = new rtsp.Live555Client({ input: _url });
						stream.on('start', () => {
							App.dialog.alert("start");
						});
						 
						stream.on('stop', () => {
							App.dialog.alert("stop");
						});
						var _hasrecv = false;
						stream.on('data', (data) => {
							//you can write your method here
							//data is flv stream
							if (!_hasrecv) {
								App.dialog.alert("recv stream");
								//console.log('recv stream:', data.length);
								stream.stop();
								App.dialog.alert("close stream");
								//console.log('close stream:', _url);
								_hasrecv = true;
							}
						});
						*/
						
						
						
						/*if(window && window.plugins && window.plugins.streamingMedia) {
						  let StreamingMedia = window.plugins.streamingMedia;
						  // play streaming video from a remove resource
						  //https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8
						  StreamingMedia.playiOS('http://192.168.1.1/livesubstream.h264');
						  //StreamingMedia.playLocaliOS("local file path")
						}*/

						/*var pc = new cordova.plugins.iosrtc.RTCPeerConnection({
						  iceServers: []
						});

						cordova.plugins.iosrtc.getUserMedia(
						  // constraints
						  { audio: true, video: true },
						  // success callback
						  function (stream) {
							console.log('got local MediaStream: ', stream);

							pc.addStream(stream);
						  },
						  // failure callback
						  function (error) {
							console.error('getUserMedia failed: ', error);
						  }
						);
						URL.createObjectURL(stream)*/
						/*
						
						page.$el.on('click', '#connectCam', function(e){
						if(window && window.plugins && window.plugins.streamingMedia) {
						  let StreamingMedia = window.plugins.streamingMedia;
						  StreamingMedia.playiOS(API_LIVE_STREAM);
						}else{
							App.dialog.alert("Error video!");
						}
				});
				
				
						if(window && window.plugins && window.plugins.streamingMedia) {
						  let StreamingMedia = window.plugins.streamingMedia;
						  StreamingMedia.playiOS("http://192.168.1.1/livesubstream.h264");
						  //StreamingMedia.playLocaliOS("local file path")
						}else{
							App.dialog.alert("Error video!");
						}*/
				});
			}
		}
    };
</script>
    