<template>
	<div class="page setting-page my-settings" data-name="my-settings">
        <div class="navbar">
            <div class="navbar-inner">
                <div class="left">
                    <a class="panel-open" href="#">
                        <i class="f7-icons icon-menu"></i>
                    </a>
                </div>
				<div class="title">Settings</div>
			</div>
		</div>
		<div class="page-content">
			<div class="list-block no-hairlines setting-list">
				<ul class="left-padding right-padding no-padding-top no-padding-bottom">
					<li class="item-content no-padding">
						<a href="#" class="my-mac-address item-inner not-empty-state display-flex align-items-center justify-content-space-between border-bottom">
							<span>
								Dashcam Name
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>
					<li class="item-content no-padding">
						<a href="#" class="my-wifi-settings item-inner not-empty-state display-flex align-items-center justify-content-space-between border-bottom">
							<span>
								Wi-Fi Settings
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>
					<li class="item-content">
						<div class="item-inner not-empty-state border-bottom">
							<a href="#" class="my-language-settings item-inner-bottom display-flex align-items-center justify-content-space-between">
								<span>
									Language
								</span>
								<i class="f7-icons icon-right"></i>
							</a>
							<!--<p class="item-bottom-text">Device has English/Russian language options, you can switch it according to your demand</p>-->
						</div>
					</li>
					<li class="item-content">
						<div class="item-inner not-empty-state border-bottom">
							<a href="/resolution.setting/" class="item-inner-bottom display-flex align-items-center justify-content-space-between">
								<span>Resolution</span>
								<i class="f7-icons icon-right"></i>
							</a>
							<!--<p class="item-bottom-text">Two options: Full HD 1080P/Full HD 720P</p>-->
						</div>
					</li>
					<li class="item-content">
						<a href="/speed.unit.setting/" class="item-inner not-empty-state display-flex align-items-center justify-content-space-between border-bottom">
							<span>
								Speed Unit
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>
					
					<li class="item-content">
						<a href="/version.setting/" class="item-inner not-empty-state display-flex align-items-center justify-content-space-between ">
							<span>
								Version Check 
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>
					<!--<li class="item-content">
						<div class="item-inner not-empty-state display-flex justify-content-space-between align-items-center border-bottom">
							<span class="item-caption">Sound Recording</span>
							<label class="toggle toggle-init">
								<input type="checkbox" name="SoundRecording">
								<span class="toggle-icon"></span>
							</label>
						</div>
					</li>
					<li class="item-content no-padding">
						<a href="/voice.setting/" class="item-inner not-empty-state display-flex align-items-center justify-content-space-between border-bottom">
							<span>
								Voice Prompt
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>
					<li class="item-content no-padding">
						<a href="/my-settings-service/" class="item-inner not-empty-state display-flex align-items-center justify-content-space-between border-bottom">
							<span>
								After Sales Service
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>
					<li class="item-content no-padding">
						<a href="/my-settings-note/" class="item-inner not-empty-state display-flex align-items-center justify-content-space-between border-bottom">
							<span>
								Note
							</span>
							<i class="f7-icons icon-right"></i>
						</a>
					</li>-->
				</ul>
            </div>
        </div>
    </div>
</template>

<script>
  // script must return component object
    return { 
        data: function () {
            var self = this;
            var ret = {
				CamName: 'Dashcam',
				WiFiRouterIp: '0.0.0.0',
				Mac: '00.00.00.00.00.00'
			};            

            return ret;
        },
		methods: {			
			ssidHandler: function(a){		
				//setTimeout(function () { // Prepend new list element						
                    self.$setState({
                        CamName: a,
                    });					
				//}, 2000);
			},				
			fail: function(e){	
				//App.dialog.alert(e);
			},
			navigateMacAddress: function(){
				var self = this;
				var name = self.CamName;
				var mac = self.Mac;
				mainView.router.navigate('/my-mac-address/?name='+name.toString()+'&mac='+mac.toString());
			},
			navigateIp: function(){
				var self = this;
				var ip = self.WiFiRouterIp;
				mainView.router.navigate('/my-wifi-settings/?ip='+ip.toString());
			},
			navigateLanguage: function(){
				var self = this;
				var ip = self.WiFiRouterIp;
				mainView.router.navigate('/my-language-settings/');
			},
		},
        on: {
            pageInit: function (e, page) {  
				var self = this;    
				//var page = page.$el.find('.page-content'); 
				
				var myPage = $$('.my-settings');
				/*
				const successSendCallback = (result) => {
				  App.dialog.alert(result);
				};

				const errorSendCallback = (error) => {
				  App.dialog.alert(error);
				};
					
				window.tlantic.plugins.socket.connect(
				  function (connectionId) {
					App.dialog.alert('worked! This is the tcp connection ID: ' + connectionId); 
						setTimeout(function () {
							window.tlantic.plugins.socket.send(
							  function () {
								App.dialog.alert('worked!');  
							  },

							  function () {
								App.dialog.alert('failed!');
							  },
							  '192.168.1.1:10080',
							  0xFFF00000000100004004
							);
						}, 80000);
				  },
				  
				  function () {
					App.dialog.alert('failed tcp!');
				  },
				  '192.168.1.1',
				  10080
				);	
				*/
				//0xFFF000001000700F00010001 - 
				//0xFFF000001000400400000000; - led green
				//0xFFF000000100000000010000 - info
				//0xFFF00000000100007007000101 - audio
				
				
				
				//WifiWizard.getCurrentSSID(self.ssidHandler, self.fail);
				WifiWizard2.getConnectedSSID().then(response => {	
					App.dialog.alert(JSON.stringify(response));					
					self.$setState({
                        CamName: JSON.stringify(response),
                    });						
				});	
				
				WifiWizard2.getConnectedNetworkID().then(response => {	
					App.dialog.alert(JSON.stringify(response));					
					self.$setState({
                        CamName: JSON.stringify(response),
                    });						
				});	
				
				WifiWizard2.getConnectedBSSID().then(response => {	
					App.dialog.alert(JSON.stringify(response));
					self.$setState({
                        Mac: JSON.stringify(response),
                    });						
				});	
								
				WifiWizard2.getWifiRouterIP().then(response => {						
					self.$setState({
                        WiFiRouterIp: JSON.stringify(response),
                    });						
				});	
				
				myPage.on('click', '.my-mac-address', self.navigateMacAddress);
				myPage.on('click', '.my-wifi-settings', self.navigateIp);
				myPage.on('click', '.my-language-settings', self.navigateLanguage);					
			}
		}
    };
</script>
    